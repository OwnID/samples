<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OwnID Sample</title>
    <link rel="stylesheet" type ="text/css" href="styles/global.css">
    <link rel="stylesheet" type ="text/css" href="styles/header.css">
    <link rel="stylesheet" type ="text/css" href="styles/form.css">
    <script src="services/httpRequests.js"></script>
    <script src="index.js"></script>
    <script>
        (function (w,d,s,u,o,e,p){w[o]=w[o]||function(){return(w[o].q=w[o].q||[]).push(arguments),Promise.resolve({error:null,data:null})},
            e=d.createElement(s),p=d.getElementsByTagName(s)[0];e.src=u;e.async=1;p.parentNode.insertBefore(e,p)
        })(window, document, 'script','https://cdn.ownid.com/js/sdk.js', 'ownid');
        ownid('init', { appId: '{app_id}' });
    </script>
</head>
<body>
<div class="header">
    <div class="logo">
        <img alt="logo" src="./assets/logo.svg"/>
    </div>
    <div class="links">
        <div><a href="https://console.ownid.com" class="header-nav-a"> Go to Console</a></div>
    </div>
</div>
<div class="nav-tabs">
    <a class="nav-link active">Login</a>
</div>
<form class="login-form" onSubmit="onSubmitLogin(this);return false;">
    <input type="email" name="email" placeholder="Email" id="email" required/>
    <input type="password" name="password" placeholder="password" id="password" required/>
    <button type="submit">Log In</button>
</form>
<div class="custom-link">
<div onclick="location.href='pages/register.html';" class="link-text">Don't have an account?</div>
</div>
<script>
    ownid("login", {
        loginIdField: document.getElementById("email"),
        passwordField: document.getElementById("password"),
        onError: (error) => console.log(error),
        onLogin: function (data) {
            //setting user session
            localStorage.setItem('data', JSON.stringify({ token: data.token }));
            //redirecting user to the account page
            window.location.href = 'pages/account.html';
        }
    });
</script>
</body>
</html>