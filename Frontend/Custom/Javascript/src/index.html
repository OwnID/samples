<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OwnID Sample</title>
    <link rel="stylesheet" type ="text/css" href="styles/global.css">
    <link rel="stylesheet" type ="text/css" href="styles/header.css">
    <link rel="stylesheet" type ="text/css" href="styles/form.css">
    <script src="services/httpRequests.js"></script>
    <script src="index.js"></script>
    <script>
      ((o,w,n,i,d)=>{o[i]=o[i]||(async(...a)=>((o[i].q=o[i].q||[]).push(a),{error:null,data:null})),
      (d=w.createElement("script")).src='https://cdn.dev.ownid.com/sdk/'+n,d.async=1,w.head.appendChild(d)})
      (window,document,'{app_id}','ownid');
    </script>
</head>
<body>
<div class="header">
    <div class="logo">
        <img alt="logo" src="./assets/logo.svg"/>
    </div>
    <div class="links">
        <div><a href="https://console.ownid.com" class="header-nav-a"> Go to Console</a></div>
    </div>
</div>
<div class="nav-tabs">
    <a class="nav-link active">Login</a>
</div>
<form class="login-form" onSubmit="onSubmitLogin(this);return false;">
    <input type="email" name="email" placeholder="Email" id="email" required/>
    <input type="password" name="password" placeholder="password" id="password" required/>
    <button type="submit">Log In</button>
</form>
<div class="custom-link">
<div onclick="location.href='pages/register.html';" class="link-text">Don't have an account?</div>
</div>
<script>
    ownid("login", {
        loginIdField: document.getElementById("email"),
        passwordField: document.getElementById("password"),
        onError: (error) => console.log(error),
        onLogin: function (data) {
            //setting user session
            localStorage.setItem('data', JSON.stringify({ token: data.token }));
            //redirecting user to the account page
            window.location.href = 'pages/account.html';
        }
    });
</script>
</body>
</html>